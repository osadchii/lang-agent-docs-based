default_language_version:
  python: python3

repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      - id: end-of-file-fixer
      - id: trailing-whitespace

  - repo: https://github.com/psf/black
    rev: 25.11.0
    hooks:
      - id: black
        name: black (backend)
        args:
          - "--config"
          - "backend/pyproject.toml"

  - repo: https://github.com/PyCQA/isort
    rev: 5.13.2
    hooks:
      - id: isort
        name: isort (backend)
        args:
          - "--settings-path"
          - "backend/pyproject.toml"

  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.6.9
    hooks:
      - id: ruff
        name: ruff (backend)
        args:
          - "--config"
          - "backend/pyproject.toml"

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.8.0
    hooks:
      - id: mypy
        name: mypy (backend/app)
        pass_filenames: false
        args:
          - "--config-file"
          - "backend/pyproject.toml"
          - "backend/app"
        additional_dependencies:
          - alembic==1.13.1
          - asyncpg==0.29.0
          - fastapi==0.110.0
          - httpx==0.26.0
          - jinja2==3.1.3
          - openai==1.12.0
          - passlib[bcrypt]==1.7.4
          - pyjwt[crypto]==2.8.0
          - pydantic==2.6.3
          - pydantic-settings==2.2.1
          - python-multipart==0.0.9
          - redis==5.0.1
          - sqlalchemy==2.0.27
          - tenacity==8.2.3
          - tiktoken==0.6.0
          - uvicorn[standard]==0.27.1
          - aiosqlite==0.20.0
          - anyio==4.2.0
          - coverage[toml]==7.4.1
          - factory-boy==3.3.0
          - faker==19.13.0
          - mypy==1.8.0
          - pytest==8.1.1
          - pytest-asyncio==0.23.5
          - pytest-cov==4.1.0
          - ruff==0.2.1
          - types-redis==4.6.0.20240218

  - repo: local
    hooks:
      - id: frontend-prettier
        name: prettier (frontend)
        entry: ./scripts/pre-commit/run_frontend_task.sh format:check
        language: system
        pass_filenames: false
      - id: frontend-eslint
        name: eslint (frontend)
        entry: ./scripts/pre-commit/run_frontend_task.sh lint
        language: system
        pass_filenames: false
